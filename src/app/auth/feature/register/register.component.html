<div class="flex flex-wrap justify-content-center align-items-center w-full min-h-screen">
  <div class="auth-form border-round bg-black-alpha-40 ">
    <span class="text-center">
      <p class="text-4xl">Register</p>
    </span>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()"
      class="flex flex-column gap-2 p-4 border-round-bottom surface-ground">

      <p-messages [value]="errorMessages" [enableService]="false" [closable]="true" />

      <div class="flex flex-column gap-2">
        <label for="name">Name</label>
        <input id="name" type="text" formControlName="name" class="p-inputtext" />
        <ng-container *ngIf="registerForm.get('name')?.errors && registerForm.get('name')?.touched">
          <small class="name-errors" class="text-red-500" *ngIf="registerForm.get('name')?.errors?.required">
            Name is required
          </small>
        </ng-container>
      </div>
      <div class="flex flex-column gap-2">
        <label for="email">Email</label>
        <input id="email" type="email" formControlName="email" class="p-inputtext" />
        <ng-container *ngIf="registerForm.get('email')?.errors && registerForm.get('email')?.touched">
          <small class="email-errors" class="text-red-500" *ngIf="registerForm.get('email')?.errors?.required">
            Email is required
          </small>
        </ng-container>
      </div>
      <div class="flex flex-column gap-2">
        <label for="password">Password</label>
        <input id="password" type="password" formControlName="password" class="p-inputtext" />
        <ng-container *ngIf="registerForm.get('password')?.errors && registerForm.get('password')?.touched">
          <small class="password-errors" class="text-red-500" *ngIf="registerForm.get('password')?.errors?.required">
            Password is required
          </small>
        </ng-container>
      </div>
      <div class="flex flex-column gap-2">
        <label for="confirmPassword">Confirm Password</label>
        <input id="confirmPassword" type="password" formControlName="confirmPassword" class="p-inputtext" />
        <ng-container
          *ngIf="registerForm.get('confirmPassword')?.errors && registerForm.get('confirmPassword')?.touched">
          <small class="confirm-password-errors" class="text-red-500"
            *ngIf="registerForm.get('confirmPassword')?.errors?.['mismatch']">
            Password and Confirm Password do not match
          </small>
        </ng-container>
      </div>
      <div class="mt-4 p-fluid">
        @if (status === 'loading') {
        <button type="submit" class="p-button p-button-success" pButton pRipple>
          <span class="flex align-items-center justify-content-center w-full gap-2">
            <i class="pi pi-spin pi-spinner" style="font-size: 1.5rem"></i>
            <span class="p-button-label flex-grow-0">Processing...</span>
          </span>
        </button>
        }
        @else {
        <button type="submit" class="p-button p-button-success font-bold" label="Register" pButton pRipple></button>
        }
      </div>
      <div class=" mt-4">
        <span>Already have an account? <a routerLink="/login">Sign in here</a></span>
      </div>
    </form>
  </div>
</div>