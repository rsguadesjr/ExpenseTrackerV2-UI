<ng-container *ngIf="state$ | async as state">
  <p-card styleClass="surface-card surface-border border-1">
    <ng-template pTemplate="header">
      <div class="flex justify-content-between align-items-center p-4 pb-0">
        <span class="text-2xl">Manage Accounts</span>
        <p-button icon="pi pi-plus" [rounded]="true" severity="info" (click)="createAccount()" pTooltip="Create Account"
          tooltipPosition="left" showDelay="500" hideDelay="300" />
      </div>
    </ng-template>
    <p-table [value]="state.accounts" [tableStyle]="{'min-width': '50rem'}">
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th>Name </th>
          <th>Description</th>
          <th>Active</th>
          <th>Default</th>
          <th>Created Date</th>
          <th>Modified Date</th>
          <th>Actions</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-account let-columns="columns">
        <tr>
          <td>{{ account.name }}</td>
          <td>{{ account.description }}</td>
          <td>

            @if (account.isActive){
            <i class="pi pi-check text-green-500 font-bold"></i>
            }
            @else {
            <i class="pi pi-times text-color-secondary font-bold"></i>
            }
          </td>
          <td>
            @if (account.isDefault){
            <i class="pi pi-check text-green-500 font-bold"></i>
            }
            @else {
            <i class="pi pi-times text-color-secondary font-bold"></i>
            }
          </td>
          <td>{{ account.createdDate | date: 'medium' }}</td>
          <td>{{ account.modifiedDate | date: 'medium' }} </td>
          <td>
            <div class="flex gap-1 justify-content-center">
              <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" severity="info" pTooltip="Edit Account"
                tooltipPosition="left" (click)="editAccount(account)" size="small" showDelay="500" hideDelay="300" />
              <p-button icon="pi pi-trash" [rounded]="true" [text]="true" severity="danger" pTooltip="Delete Account"
                tooltipPosition="left" (click)="deleteAccount(account)" size="small" showDelay="500" hideDelay="300" />
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </p-card>
  <p-confirmDialog />
</ng-container>